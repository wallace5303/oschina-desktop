{"version":3,"sources":["webpack:///./src/views/information/news/Index.vue","webpack:///src/views/information/news/Index.vue","webpack:///./src/views/information/news/Index.vue?e4cd","webpack:///./src/views/information/news/Index.vue?126e","webpack:///./src/views/information/news/Index.vue?ee2b"],"names":["render","_vm","this","_c","_self","attrs","staticClass","on","changeTab","_l","tabs","id","name","key","slot","_v","_s","itemList","scopedSlots","_u","fn","item","actions","type","staticStyle","dealActions","$event","showDetail","title","newsTitle","detailVisible","panding","textAlign","onDetailClose","style","fontSize","newsContent","author","pubDate","commentCount","color","domProps","body","staticRenderFns","data","auth_token","currentPage","perPage","catalogText","newsCount","newsTypeText","loading","currentTabKey","text","mounted","methods","init","getNews","access_token","catalog","page","pageSize","dataType","console","getNewsDetail","component"],"mappings":"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","file":"js/chunk-35cb47ae.7cf85aae.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"information-news-index\"}},[_c('div',{staticClass:\"one-block-1\"},[_c('a-tabs',{attrs:{\"default-active-key\":\"1\"},on:{\"change\":_vm.changeTab}},_vm._l((_vm.tabs),function({id, name}){return _c('a-tab-pane',{key:id},[_c('span',{attrs:{\"slot\":\"tab\"},slot:\"tab\"},[_vm._v(\" \"+_vm._s(name)+\" \")]),_c('div',{staticClass:\"one-block-3\"},[_c('a-list',{attrs:{\"item-layout\":\"vertical\",\"size\":\"large\",\"data-source\":_vm.itemList},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item){return _c('a-list-item',{key:\"item.title\"},[_vm._l((_vm.actions),function({ type }){return _c('template',{slot:\"actions\"},[_c('span',{key:type},[_c('a-icon',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":type}}),_vm._v(\" \"+_vm._s(_vm.dealActions(type, item))+\" \")],1)])}),_c('a-list-item-meta',[_c('a',{staticClass:\"news-title\",attrs:{\"slot\":\"title\",\"href\":\"#\"},on:{\"click\":function($event){return _vm.showDetail(item.id)}},slot:\"title\"},[_vm._v(_vm._s(item.title))])])],2)}}],null,true)})],1)])}),1)],1),_c('div',{staticClass:\"one-block-2\"},[_c('a-drawer',{attrs:{\"title\":_vm.newsTitle,\"width\":\"100%\",\"visible\":_vm.detailVisible,\"body-style\":{ panding: '10px' },\"header-style\":{ textAlign: 'center' }},on:{\"close\":_vm.onDetailClose}},[_c('a-space',{style:({ fontSize: '14px' })},[_c('span',[_vm._v(\"作者：\"+_vm._s(_vm.newsContent.author))]),_c('span',[_vm._v(_vm._s(_vm.newsContent.pubDate))]),_c('span',[_c('a-icon',{attrs:{\"type\":\"message\"}}),_vm._v(\" \"+_vm._s(_vm.newsContent.commentCount))],1)]),_c('div',{style:({ fontSize: '14px', color: '#000' })},[_c('p'),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.newsContent.body)}})])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"information-news-index\">\r\n    <div class=\"one-block-1\">\r\n      <a-tabs default-active-key=\"1\" @change=\"changeTab\">\r\n        <a-tab-pane v-for=\"{id, name} in tabs\" :key=\"id\" >\r\n          <span slot=\"tab\">\r\n            {{ name }}\r\n          </span>\r\n          <div class=\"one-block-3\">\r\n            <a-list item-layout=\"vertical\" size=\"large\" :data-source=\"itemList\">\r\n              <a-list-item slot=\"renderItem\" key=\"item.title\" slot-scope=\"item\">\r\n                <template v-for=\"{ type } in actions\" slot=\"actions\">\r\n                  <span :key=\"type\">\r\n                    <a-icon :type=\"type\" style=\"margin-right: 8px\" />\r\n                    {{ dealActions(type, item) }}\r\n                  </span>\r\n                </template>\r\n                <a-list-item-meta>\r\n                  <a slot=\"title\" href=\"#\" class=\"news-title\" @click=\"showDetail(item.id)\">{{ item.title }}</a>\r\n                </a-list-item-meta>\r\n              </a-list-item>\r\n            </a-list>\r\n          </div>\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n    </div>  \r\n    <div class=\"one-block-2\">\r\n      <a-drawer\r\n        :title=\"newsTitle\"\r\n        width=\"100%\"\r\n        :visible=\"detailVisible\"\r\n        :body-style=\"{ panding: '10px' }\"\r\n        :header-style=\"{ textAlign: 'center' }\"\r\n        @close=\"onDetailClose\"\r\n      >\r\n        <a-space :style=\"{ fontSize: '14px' }\">\r\n          <span>作者：{{ newsContent.author }}</span>\r\n          <span>{{ newsContent.pubDate }}</span>\r\n          <span><a-icon type=\"message\" /> {{ newsContent.commentCount }}</span>\r\n        </a-space>\r\n        <div :style=\"{ fontSize: '14px', color: '#000' }\">\r\n          <p/>\r\n          <div v-html=\"newsContent.body\"></div>\r\n        </div>\r\n      </a-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport storage from 'store2'\r\nimport _ from 'lodash'\r\nimport { ipcApiRoute } from '@/api/main'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      auth_token: '',\r\n      currentPage: 1,\r\n      perPage: 5,\r\n      itemList: [],\r\n      catalogText:{\r\n        1: '综合新闻',\r\n        2: '软件更新',\r\n        3: '所有'\r\n      },\r\n      newsCount: 0,\r\n      newsTypeText: {\r\n        0: '链接新闻',\r\n        1: '软件推荐',\r\n        2: '讨论区帖子',\r\n        3: '博客',\r\n        4: '普通新闻',\r\n        7: '翻译文章',\r\n      },\r\n      detailVisible: false,\r\n      loading: false,\r\n      tabs: [\r\n        { id: '1', name: '综合新闻'},\r\n        { id: '2', name: '软件更新'},\r\n        { id: '3', name: '最新资讯'},\r\n      ],\r\n      currentTabKey: '1',\r\n      actions: [\r\n        { type: 'user', text: '' },\r\n        { type: 'tag', text: '' },\r\n        { type: 'message', text: '' },\r\n        { type: 'calendar', text: '' },\r\n      ],\r\n      newsTitle: '',\r\n      newsContent: ''\r\n    };\r\n  },\r\n  mounted () {\r\n    this.init();\r\n    this.getNews();\r\n  },\r\n  methods: {\r\n    init () {\r\n      const token_info = storage.get('token_info');\r\n      this.auth_token = token_info.access_token;\r\n    },\r\n    getNews () {\r\n      const params = {\r\n        access_token: this.auth_token,\r\n        catalog: this.currentTabKey,\r\n        page: this.currentPage,\r\n        pageSize: this.perPage,\r\n        dataType: 'json'\r\n      }\r\n      this.$ipcInvoke(ipcApiRoute.oschina.getNews, params).then(res => {\r\n        //console.log('res:', this.res)\r\n        this.itemList = res.newslist;\r\n        console.log('itemList:', this.itemList)\r\n      }) \r\n    },\r\n    getNewsDetail (id) {\r\n      const params = {\r\n        access_token: this.auth_token,\r\n        id:id,\r\n        dataType: 'json'\r\n      }\r\n      this.$ipcInvoke(ipcApiRoute.oschina.getNewsDetail, params).then(res => {\r\n        console.log('res:', res)\r\n        if (_.isEmpty(res)) {\r\n          this.$message.error('数据不存在');\r\n        }\r\n        this.newsContent = res;\r\n        this.newsTitle = res.title;\r\n      }) \r\n    },\r\n    changeTab (key) {\r\n      this.currentTabKey = key;\r\n      this.currentPage = 1;\r\n      console.log('currentTabKey:', this.currentTabKey)\r\n      this.getNews();\r\n    },\r\n    dealActions (type, item) {\r\n      let text = '';\r\n      //console.log(item.full_name);\r\n      if (type == 'user') {\r\n        text = item.author;\r\n      } else if (type == 'tag') {\r\n        text = this.newsTypeText[item.type] || '其它';\r\n      } else if (type == 'message') {\r\n        text = item.commentCount;\r\n      } else if (type == 'calendar') {\r\n        text = item.pubDate;\r\n      }\r\n\r\n      return text;\r\n    },\r\n    showDetail(id) {\r\n      this.detailVisible = true;\r\n      this.getNewsDetail(id);\r\n    },\r\n    onDetailClose () {\r\n      console.log('sssss');\r\n      this.detailVisible = false;\r\n    } \r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n#information-news-index {\r\n  padding: 0px 30px;\r\n  text-align: left;\r\n  width: 100%;\r\n  .one-block-1 {\r\n    font-size: 16px;\r\n    padding-top: 10px;\r\n  }\r\n  .one-block-2 {\r\n    padding-top: 0px;\r\n  }\r\n  .one-block-3 {\r\n    //padding-top: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=7819619c&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=7819619c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7819619c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=7819619c&prod&lang=less&scoped=true&\""],"sourceRoot":""}